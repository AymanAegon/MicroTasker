(()=>{var e={};e.id=139,e.ids=[139],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11322:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var t=r(65239),a=r(48088),l=r(88170),i=r.n(l),o=r(30893),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(s,n);let d={children:["",{children:["profile",{children:["[uid]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,91301)),"/home/user/studio/src/app/profile/[uid]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"/home/user/studio/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/profile/[uid]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/profile/[uid]/page",pathname:"/profile/[uid]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},25708:(e,s,r)=>{Promise.resolve().then(r.bind(r,96562))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},38860:(e,s,r)=>{Promise.resolve().then(r.bind(r,91301))},55511:e=>{"use strict";e.exports=require("crypto")},55817:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(82614).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91301:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/profile/[uid]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/profile/[uid]/page.tsx","default")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96562:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>b});var t=r(60687),a=r(44493),l=r(43210),i=r(55817);let o=(0,r(82614).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var n=r(78726),d=r(29523),c=r(72734),u=r(85814),p=r.n(u),h=r(75535),x=r(89667),m=r(54300),f=r(15079),g=r(16189),j=r(22126),v=r(93090);let w=({closeDialog:e})=>{let[s,r]=(0,l.useState)(""),[i,o]=(0,l.useState)(""),[n,c]=(0,l.useState)(""),[u,p]=(0,l.useState)(!1),[h,f]=(0,l.useState)(!1),[g,j]=(0,l.useState)(!1),w=(0,v.xI)().currentUser,N=async t=>{if(t.preventDefault(),p(!1),f(!1),j(!1),w){if(i!==n){j(!0);return}try{let t=v.IX.credential(w.email??"",s);await (0,v.kZ)(w,t),await (0,v.f3)(w,i),r(""),o(""),c(""),e()}catch(e){"auth/invalid-credential"===e.code?p(!0):"auth/requires-recent-login"===e.code?console.log("Please sign in again to update your password."):"auth/weak-password"===e.code?f(!0):console.error("Error updating password:",e)}}};return(0,t.jsx)("div",{className:"flex justify-center items-center py-0 bg-secondary",children:(0,t.jsxs)(a.Zp,{className:"w-full max-w-2xl",children:[(0,t.jsx)(a.aR,{children:(0,t.jsx)(a.ZB,{className:"text-2xl",children:"Please enter your current password to continue."})}),(0,t.jsxs)(a.Wu,{className:"grid gap-6",children:[(0,t.jsxs)("form",{onSubmit:N,className:"grid gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(m.J,{htmlFor:"title",children:"Old password"}),(0,t.jsx)(x.p,{type:"password",id:"old-pass",onChange:e=>r(e.target.value),placeholder:"Old password",required:!0}),u&&(0,t.jsx)("p",{className:"text-red-500 mt-2",children:"Wrong Password!"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(m.J,{htmlFor:"description",children:"New password"}),(0,t.jsx)(x.p,{type:"password",id:"new-pass1",onChange:e=>o(e.target.value),placeholder:"New password",required:!0}),h&&(0,t.jsx)("p",{className:"text-red-500 mt-2",children:"Password is too weak!"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(m.J,{htmlFor:"location",children:"Confirm password"}),(0,t.jsx)(x.p,{type:"password",id:"new-pass2",onChange:e=>c(e.target.value),placeholder:"New password",required:!0}),g&&(0,t.jsx)("p",{className:"text-red-500 mt-2",children:"Passwords are unmatched!"})]}),(0,t.jsx)(d.$,{type:"submit",className:"w-full",children:"Change"})]}),(0,t.jsx)(d.$,{variant:"outline",onClick:e,className:"w-full",children:"Cancel"})]})]})})},N=({profile:e})=>{let{firestorePromises:s,user:r}=(0,c.useAuth)(),[u,v]=(0,l.useState)(0),[N,y]=(0,l.useState)(""),[b,k]=(0,l.useState)(""),[C,P]=(0,l.useState)(""),[q,S]=(0,l.useState)(!1),[_,A]=(0,l.useState)(!1),[F,E]=(0,l.useState)(""),[z,G]=(0,l.useState)(null),[L,D]=(0,l.useState)(!1),[I,M]=(0,l.useState)(!1),O=e.tasks.filter(e=>(!b||"all"===b||e.category===b)&&(!N||!!e.title.toLowerCase().includes(N.toLowerCase())||!!e.description.toLowerCase().includes(N.toLowerCase()))&&(!C||!!e.location.toLowerCase().includes(C.toLowerCase())));(0,l.useEffect)(()=>{e&&E(e.fullName)},[e]);let $=async()=>{try{D(!0),e.uid&&e.uid===r?.uid||(0,g.notFound)();let{getFirestore:t}=await s,a=t(),l=(0,h.doc)(a,"users",e.uid);await (0,h.updateDoc)(l,{fullName:F}),console.log("Full Name updated successfully!"),v(u+1)}catch(e){console.log("Error updating Profile.",e)}finally{D(!1)}},B=async()=>{try{M(!0),e.uid&&e.uid===r?.uid||(0,g.notFound)();let{getFirestore:t}=await s,a=t();if(z){let s=new FormData;s.append("file",z);let r=await fetch("/api/upload",{method:"POST",body:s});if(!r.ok){let e=await r.json();console.error("Upload failed:",e);return}let t=await r.json(),l=(0,h.doc)(a,"users",e.uid);await (0,h.updateDoc)(l,{imageUrl:t.secure_url})}v(u+1)}catch(e){console.log("Error updating Profile.",e)}finally{M(!1)}};return(0,t.jsx)("div",{className:"flex flex-col justify-center items-center py-10 bg-secondary gap-4 w-full min-h-screen",children:(0,t.jsxs)("div",{className:"w-full max-w-5xl px-4",children:[!q&&(0,t.jsxs)(p(),{href:"/",className:"flex items-center text-blue-500 hover:underline mb-4",children:[(0,t.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,t.jsxs)(a.Zp,{className:"w-full",children:[(0,t.jsxs)(a.aR,{className:"p-6 pb-0",children:[(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-white shadow-md",children:(0,t.jsx)("img",{src:e.imageUrl||"https://res.cloudinary.com/drmmom6jz/image/upload/v1746027479/Screenshot_from_2025-04-30_16-37-48_g58zzn.png",alt:"Profile",className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:e.fullName}),(0,t.jsx)("h3",{className:"text-lg text-gray-600",children:"taskPoster"===e.role?"(Task Poster)":"(Tasker)"})]})]}),(0,t.jsx)("div",{className:"absolute top-6 right-6",children:q||e.uid!==r?.uid?q&&(0,t.jsx)(n.A,{onClick:()=>S(!1),className:"mr-2 h-4 w-4 cursor-pointer"}):(0,t.jsx)(o,{onClick:()=>S(!0),className:"mr-2 h-4 w-4 cursor-pointer"})})]}),(0,t.jsx)(a.Wu,{className:"p-6 pt-2 space-y-4",children:q?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"w-full flex gap-1.5 items-center",children:[(0,t.jsx)(m.J,{className:"",htmlFor:"fullName",children:"Full Name"}),(0,t.jsx)(x.p,{className:"w-4/6 flex-none",id:"fullName",name:"fullName",value:F,onChange:e=>E(e.target.value||"")}),(0,t.jsx)(d.$,{className:"w-1/6 flex-auto",onClick:$,disabled:L,children:L?"Saving...":"Save Name"})]}),(0,t.jsxs)("div",{className:"w-full flex gap-1.5 items-center",children:[(0,t.jsx)(m.J,{className:"",htmlFor:"image",children:"Profile Image"}),(0,t.jsx)(x.p,{type:"file",accept:"image/*",onChange:e=>{null!==e.target.files&&G(e.target.files?.[0]||null)},className:"w-4/6 flex-none"}),(0,t.jsx)(d.$,{className:"w-1/6 flex-auto",onClick:B,disabled:I,children:I?"Saving...":"Save Image"})]}),(0,t.jsxs)(j.lG,{open:_,onOpenChange:A,children:[(0,t.jsx)(j.zM,{asChild:!0,children:(0,t.jsx)(d.$,{children:"Change the password"})}),(0,t.jsxs)(j.Cf,{className:"sm:max-w-[600px]",children:[(0,t.jsx)(j.c7,{children:(0,t.jsx)(j.L3,{children:"Changing the password"})}),(0,t.jsx)(j.rr,{children:"Make sure to choose a strong password!"}),(0,t.jsx)(w,{closeDialog:()=>A(!1)})]})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:["Total tasks: ",e.tasks.length]}),(0,t.jsxs)("div",{className:"mb-4 flex space-x-2",children:[(0,t.jsx)(x.p,{type:"text",placeholder:"Search tasks...",value:N,onChange:e=>y(e.target.value)}),(0,t.jsxs)(f.l6,{onValueChange:k,children:[(0,t.jsx)(f.bq,{className:"w-[180px]",children:(0,t.jsx)(f.yv,{placeholder:"Category"})}),(0,t.jsxs)(f.gC,{children:[(0,t.jsx)(f.eb,{value:"all",children:"All"}),(0,t.jsx)(f.eb,{value:"delivery",children:"Delivery"}),(0,t.jsx)(f.eb,{value:"cleaning",children:"Cleaning"}),(0,t.jsx)(f.eb,{value:"handyman",children:"Handyman"}),(0,t.jsx)(f.eb,{value:"other",children:"Other"})]})]})]}),(0,t.jsx)("div",{className:"grid gap-4",children:O.map(e=>(0,t.jsx)(p(),{href:`/task/${e.id}`,className:"no-underline",children:(0,t.jsx)(a.Zp,{className:"relative hover:shadow-md transition-shadow",children:(0,t.jsxs)(a.Wu,{className:"p-4",children:[(0,t.jsx)("div",{className:"absolute top-2 right-2",children:(0,t.jsxs)("span",{className:"font-semibold",children:["Budget: $",e.budget]})}),(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsx)(a.ZB,{className:"text-lg font-medium",children:e.title})}),(0,t.jsx)("div",{children:(0,t.jsx)(a.BT,{className:"text-sm text-gray-600",children:e.description})}),(0,t.jsx)("div",{className:"absolute bottom-2 right-2",children:(0,t.jsxs)("span",{className:"text-sm",children:["Location: ",e.location]})})]})})},e.id))})]})})]})]})},u)};function y(){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:[(0,t.jsx)("title",{children:"404 Not Found"}),(0,t.jsx)("div",{className:"bg-white p-10 rounded-lg shadow-md text-center max-w-md",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,t.jsx)("h1",{className:"text-6xl font-bold text-red-500",children:"404"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-gray-700",children:"Not Found"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Oops! It looks like the page you were looking for could not be found."}),(0,t.jsx)(p(),{href:"/",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded",children:"Go Back to Home"})]})})]})}let b=()=>{let e=(0,g.useRouter)(),{uid:s}=(0,g.useParams)(),{user:r}=(0,c.useAuth)(),{firestorePromises:a}=(0,c.useAuth)(),{app:i}=(0,c.useFirebase)(),[o,n]=(0,l.useState)(null),[d,u]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{if(!s||!i||!r){e.push("/");return}let{getFirestore:t}=await a,l=t(i),d=(0,h.doc)(l,"users",s),c=await (0,h.getDoc)(d),p=[],x=(0,h.rJ)(l,"tasks");(await (0,h.GG)(x)).forEach(e=>{e.data().userId===s&&p.push({id:e.id,...e.data()})}),c.exists()&&n({uid:c.id??"",...c.data(),tasks:p}),o||u(!1)})()},[s,i,a]),(0,t.jsx)("div",{children:o&&o.uid?(0,t.jsx)(N,{profile:o}):!d&&(0,t.jsx)(y,{})})}}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[447,231,865,692,795],()=>r(11322));module.exports=t})();