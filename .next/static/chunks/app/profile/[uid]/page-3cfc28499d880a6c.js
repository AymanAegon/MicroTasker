(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{2543:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5865:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var l=a(5155),t=a(6695),r=a(2115),i=a(2543);let d=(0,a(157).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var n=a(5318),c=a(285),o=a(4092),u=a(6874),h=a.n(u),x=a(5317),m=a(2523),p=a(5057),j=a(9409),g=a(5695),f=a(4165),w=a(3004);let N=e=>{let{closeDialog:s}=e,[a,i]=(0,r.useState)(""),[d,n]=(0,r.useState)(""),[o,u]=(0,r.useState)(""),[h,x]=(0,r.useState)(!1),[j,g]=(0,r.useState)(!1),[f,N]=(0,r.useState)(!1),v=(0,w.xI)().currentUser,y=async e=>{if(e.preventDefault(),x(!1),g(!1),N(!1),v){if(d!==o){N(!0);return}try{var l;let e=w.IX.credential(null!==(l=v.email)&&void 0!==l?l:"",a);await (0,w.kZ)(v,e),await (0,w.f3)(v,d),i(""),n(""),u(""),s()}catch(e){"auth/invalid-credential"===e.code?x(!0):"auth/requires-recent-login"===e.code?console.log("Please sign in again to update your password."):"auth/weak-password"===e.code?g(!0):console.error("Error updating password:",e)}}};return(0,l.jsx)("div",{className:"flex justify-center items-center py-0 bg-secondary",children:(0,l.jsxs)(t.Zp,{className:"w-full max-w-2xl",children:[(0,l.jsx)(t.aR,{children:(0,l.jsx)(t.ZB,{className:"text-2xl",children:"Please enter your current password to continue."})}),(0,l.jsxs)(t.Wu,{className:"grid gap-6",children:[(0,l.jsxs)("form",{onSubmit:y,className:"grid gap-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(p.J,{htmlFor:"title",children:"Old password"}),(0,l.jsx)(m.p,{type:"password",id:"old-pass",onChange:e=>i(e.target.value),placeholder:"Old password",required:!0}),h&&(0,l.jsx)("p",{className:"text-red-500 mt-2",children:"Wrong Password!"})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(p.J,{htmlFor:"description",children:"New password"}),(0,l.jsx)(m.p,{type:"password",id:"new-pass1",onChange:e=>n(e.target.value),placeholder:"New password",required:!0}),j&&(0,l.jsx)("p",{className:"text-red-500 mt-2",children:"Password is too weak!"})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(p.J,{htmlFor:"location",children:"Confirm password"}),(0,l.jsx)(m.p,{type:"password",id:"new-pass2",onChange:e=>u(e.target.value),placeholder:"New password",required:!0}),f&&(0,l.jsx)("p",{className:"text-red-500 mt-2",children:"Passwords are unmatched!"})]}),(0,l.jsx)(c.$,{type:"submit",className:"w-full",children:"Change"})]}),(0,l.jsx)(c.$,{variant:"outline",onClick:s,className:"w-full",children:"Cancel"})]})]})})},v=e=>{let{profile:s}=e,{firestorePromises:a,user:u}=(0,o.useAuth)(),[w,v]=(0,r.useState)(0),[y,b]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),[S,P]=(0,r.useState)(""),[F,_]=(0,r.useState)(!1),[A,E]=(0,r.useState)(!1),[L,O]=(0,r.useState)(""),[z,D]=(0,r.useState)(null),[q,B]=(0,r.useState)(!1),[I,J]=(0,r.useState)(!1),Z=s.tasks.filter(e=>(!k||"all"===k||e.category===k)&&(!y||!!e.title.toLowerCase().includes(y.toLowerCase())||!!e.description.toLowerCase().includes(y.toLowerCase()))&&(!S||!!e.location.toLowerCase().includes(S.toLowerCase())));(0,r.useEffect)(()=>{s&&O(s.fullName)},[s]);let $=async()=>{try{B(!0),s.uid&&s.uid===(null==u?void 0:u.uid)||(0,g.notFound)();let{getFirestore:e}=await a,l=e(),t=(0,x.doc)(l,"users",s.uid);await (0,x.updateDoc)(t,{fullName:L}),console.log("Full Name updated successfully!"),v(w+1)}catch(e){console.log("Error updating Profile.",e)}finally{B(!1)}},T=async()=>{try{J(!0),s.uid&&s.uid===(null==u?void 0:u.uid)||(0,g.notFound)();let{getFirestore:e}=await a,l=e();if(z){let e=new FormData;e.append("file",z);let a=await fetch("/api/upload",{method:"POST",body:e});if(!a.ok){let e=await a.json();console.error("Upload failed:",e);return}let t=await a.json(),r=(0,x.doc)(l,"users",s.uid);await (0,x.updateDoc)(r,{imageUrl:t.secure_url})}v(w+1)}catch(e){console.log("Error updating Profile.",e)}finally{J(!1)}};return(0,l.jsx)("div",{className:"flex flex-col justify-center items-center py-10 bg-secondary gap-4 w-full min-h-screen",children:(0,l.jsxs)("div",{className:"w-full max-w-5xl px-4",children:[!F&&(0,l.jsxs)(h(),{href:"/",className:"flex items-center text-blue-500 hover:underline mb-4",children:[(0,l.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,l.jsxs)(t.Zp,{className:"w-full",children:[(0,l.jsxs)(t.aR,{className:"p-6 pb-0",children:[(0,l.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,l.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-white shadow-md",children:(0,l.jsx)("img",{src:s.imageUrl||"https://res.cloudinary.com/drmmom6jz/image/upload/v1746027479/Screenshot_from_2025-04-30_16-37-48_g58zzn.png",alt:"Profile",className:"w-full h-full object-cover"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:s.fullName}),(0,l.jsx)("h3",{className:"text-lg text-gray-600",children:"taskPoster"===s.role?"(Task Poster)":"(Tasker)"})]})]}),(0,l.jsx)("div",{className:"absolute top-6 right-6",children:F||s.uid!==(null==u?void 0:u.uid)?F&&(0,l.jsx)(n.A,{onClick:()=>_(!1),className:"mr-2 h-4 w-4 cursor-pointer"}):(0,l.jsx)(d,{onClick:()=>_(!0),className:"mr-2 h-4 w-4 cursor-pointer"})})]}),(0,l.jsx)(t.Wu,{className:"p-6 pt-2 space-y-4",children:F?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"w-full flex gap-1.5 items-center",children:[(0,l.jsx)(p.J,{className:"",htmlFor:"fullName",children:"Full Name"}),(0,l.jsx)(m.p,{className:"w-4/6 flex-none",id:"fullName",name:"fullName",value:L,onChange:e=>O(e.target.value||"")}),(0,l.jsx)(c.$,{className:"w-1/6 flex-auto",onClick:$,disabled:q,children:q?"Saving...":"Save Name"})]}),(0,l.jsxs)("div",{className:"w-full flex gap-1.5 items-center",children:[(0,l.jsx)(p.J,{className:"",htmlFor:"image",children:"Profile Image"}),(0,l.jsx)(m.p,{type:"file",accept:"image/*",onChange:e=>{var s;null!==e.target.files&&D((null===(s=e.target.files)||void 0===s?void 0:s[0])||null)},className:"w-4/6 flex-none"}),(0,l.jsx)(c.$,{className:"w-1/6 flex-auto",onClick:T,disabled:I,children:I?"Saving...":"Save Image"})]}),(0,l.jsxs)(f.lG,{open:A,onOpenChange:E,children:[(0,l.jsx)(f.zM,{asChild:!0,children:(0,l.jsx)(c.$,{children:"Change the password"})}),(0,l.jsxs)(f.Cf,{className:"sm:max-w-[600px]",children:[(0,l.jsx)(f.c7,{children:(0,l.jsx)(f.L3,{children:"Changing the password"})}),(0,l.jsx)(f.rr,{children:"Make sure to choose a strong password!"}),(0,l.jsx)(N,{closeDialog:()=>E(!1)})]})]})]}):(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:["Total tasks: ",s.tasks.length]}),(0,l.jsxs)("div",{className:"mb-4 flex space-x-2",children:[(0,l.jsx)(m.p,{type:"text",placeholder:"Search tasks...",value:y,onChange:e=>b(e.target.value)}),(0,l.jsxs)(j.l6,{onValueChange:C,children:[(0,l.jsx)(j.bq,{className:"w-[180px]",children:(0,l.jsx)(j.yv,{placeholder:"Category"})}),(0,l.jsxs)(j.gC,{children:[(0,l.jsx)(j.eb,{value:"all",children:"All"}),(0,l.jsx)(j.eb,{value:"delivery",children:"Delivery"}),(0,l.jsx)(j.eb,{value:"cleaning",children:"Cleaning"}),(0,l.jsx)(j.eb,{value:"handyman",children:"Handyman"}),(0,l.jsx)(j.eb,{value:"other",children:"Other"})]})]})]}),(0,l.jsx)("div",{className:"grid gap-4",children:Z.map(e=>(0,l.jsx)(h(),{href:"/task/".concat(e.id),className:"no-underline",children:(0,l.jsx)(t.Zp,{className:"relative hover:shadow-md transition-shadow",children:(0,l.jsxs)(t.Wu,{className:"p-4",children:[(0,l.jsx)("div",{className:"absolute top-2 right-2",children:(0,l.jsxs)("span",{className:"font-semibold",children:["Budget: $",e.budget]})}),(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)(t.ZB,{className:"text-lg font-medium",children:e.title})}),(0,l.jsx)("div",{children:(0,l.jsx)(t.BT,{className:"text-sm text-gray-600",children:e.description})}),(0,l.jsx)("div",{className:"absolute bottom-2 right-2",children:(0,l.jsxs)("span",{className:"text-sm",children:["Location: ",e.location]})})]})})},e.id))})]})})]})]})},w)};function y(){return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:[(0,l.jsx)("title",{children:"404 Not Found"}),(0,l.jsx)("div",{className:"bg-white p-10 rounded-lg shadow-md text-center max-w-md",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,l.jsx)("h1",{className:"text-6xl font-bold text-red-500",children:"404"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-700",children:"Not Found"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Oops! It looks like the page you were looking for could not be found."}),(0,l.jsx)(h(),{href:"/",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded",children:"Go Back to Home"})]})})]})}let b=()=>{let e=(0,g.useRouter)(),{uid:s}=(0,g.useParams)(),{user:a}=(0,o.useAuth)(),{firestorePromises:t}=(0,o.useAuth)(),{app:i}=(0,o.useFirebase)(),[d,n]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{if(!s||!i||!a){e.push("/");return}let{getFirestore:l}=await t,r=l(i),c=(0,x.doc)(r,"users",s),o=await (0,x.getDoc)(c),h=[],m=(0,x.rJ)(r,"tasks");if((await (0,x.GG)(m)).forEach(e=>{e.data().userId===s&&h.push({id:e.id,...e.data()})}),o.exists()){var p;n({uid:null!==(p=o.id)&&void 0!==p?p:"",...o.data(),tasks:h})}d||u(!1)})()},[s,i,t]),(0,l.jsx)("div",{children:d&&d.uid?(0,l.jsx)(v,{profile:d}):!c&&(0,l.jsx)(y,{})})}},9924:(e,s,a)=>{Promise.resolve().then(a.bind(a,5865))}},e=>{var s=s=>e(e.s=s);e.O(0,[992,192,984,874,149,197,706,188,441,684,358],()=>s(9924)),_N_E=e.O()}]);